DROP TABLE IF EXISTS userdata;
CREATE TABLE userdata (
	username VARCHAR(30) NOT NULL,
	password VARCHAR(100) NOT NULL,
	name VARCHAR(30) NOT NULL,
	role VARCHAR(20) NOT NULL,
	email VARCHAR(320) NOT NULL,
	phone VARCHAR(15) NOT NULL,
	PRIMARY KEY (username)
);

DROP TABLE IF EXISTS facility;
CREATE TABLE facility (
	id INT GENERATED BY DEFAULT AS IDENTITY NOT NULL,
	name VARCHAR(30) NOT NULL,
	type VARCHAR(20) NOT NULL,
	address VARCHAR(100) NOT NULL,
	email VARCHAR(320) NOT NULL,
	phone VARCHAR(15) NOT NULL,
	PRIMARY KEY (id)
);

DROP TABLE IF EXISTS stock;
CREATE TABLE stock (
	id INT GENERATED BY DEFAULT AS IDENTITY NOT NULL,
	name VARCHAR(30) NOT NULL,
	type VARCHAR(20) NOT NULL,
	price DECIMAL(10,2) NOT NULL,
	quantity INT NOT NULL,
	minvalue INT NOT NULL,
	facility INT NOT NULL,
	PRIMARY KEY (id)
);

DROP TABLE IF EXISTS log;
CREATE TABLE log (
	id INT GENERATED BY DEFAULT AS IDENTITY NOT NULL,
	facility INT NOT NULL,
	item INT NOT NULL,
	quantity INT NOT NULL,
	action VARCHAR(10) NOT NULL,
	timestamp TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
	PRIMARY KEY (id)
);